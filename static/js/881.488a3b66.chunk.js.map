{"version":3,"file":"static/js/881.488a3b66.chunk.js","mappings":"6KAEMA,EAAU,mCAGDC,SAAAA,IAAf,OAAeA,GAAAA,EAAAA,EAAAA,GAAAA,IAAAA,MAAf,WAA2BC,EAAOC,GAAlC,qFAEkB,aAAVD,EAFR,gCAGwBE,EAAAA,EAAAA,IAAA,mCAAsCJ,IAH9D,cAGYK,EAHZ,yBAIaA,EAAIC,KAAKC,SAJtB,UAKyB,WAAVL,EALf,kCAMwBE,EAAAA,EAAAA,IAAA,6BACMD,EADN,oBACuBH,IAP/C,eAMYK,EANZ,yBASaA,EAAIC,KAAKC,SATtB,0DAYIC,QAAQC,IAAR,MAZJ,iFAFAL,EAAAA,EAAAA,SAAAA,QAAyB,gCAkBzB,IAlBA,SAE2B,EAAZH,GAAAA,OAAAA,EAAAA,MAAAA,KAAAA,UAAAA,C,kHCJf,EAAuB,qB,SC8DvB,EA1De,WAAO,IAAD,EACnB,GAA4BS,EAAAA,EAAAA,UAAS,IAArC,eAAOC,EAAP,KAAeC,EAAf,KACA,GAA4BF,EAAAA,EAAAA,UAAS,IAArC,eAAOG,EAAP,KAAeC,EAAf,KACA,GAA4BC,EAAAA,EAAAA,MAA5B,eAAOC,EAAP,KAAeC,EAAf,KACMC,EAAY,UAAGF,EAAOG,IAAI,gBAAd,QAA0B,GACtCC,GAAWC,EAAAA,EAAAA,OAEjBC,EAAAA,EAAAA,YAAU,WACRV,EAAUM,IACVjB,EAAAA,EAAAA,GAAY,SAAUU,GAAQY,MAAK,SAAAlB,GAAG,OAAIS,EAAUT,EAAd,GAEvC,GAAE,CAACM,IAgBJ,OACE,8BACE,iBAAKa,UAAU,YAAf,WACE,kBAAMA,UAAWC,EAAUC,SAjBZ,SAAAC,GACnBA,EAAEC,iBACFhB,EAAUM,GACVS,EAAEE,OAAOC,MAAQ,EAClB,EAaK,WACE,kBACEC,KAAK,OACLC,KAAK,QACLC,SAfU,SAAAN,GAClB,IAAMG,EAAQH,EAAEE,OAAOC,MACvB,GAAc,KAAVA,EACF,OAAOb,EAAU,CAAC,GAEpBA,EAAU,CAAEd,MAAO2B,GACpB,EAUSA,MAAOZ,KAET,mBAAQa,KAAK,SAAb,wBAEF,wBACGlB,GACCA,EAAOqB,KAAI,SAAAC,GAAI,OACb,yBACE,SAAC,KAAD,CAEEC,GAAE,kBAAaD,EAAKE,IACpBC,MAAO,CAAEC,KAAMnB,GAHjB,SAKGe,EAAKK,OAJDL,EAAKE,KAFLF,EAAKE,GADD,UAe1B,C","sources":["api/fetchMovies.js","webpack://react-homework-template/./src/pages/Movies/Movies.module.css?82ee","pages/Movies/Movies.jsx"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = 'e9d0a81ada840dc5591eec7d6bc6424f';\naxios.defaults.baseURL = 'https://api.themoviedb.org/3/';\n\nasync function fetchMovies(param, query) {\n  try {\n    if (param === 'trending') {\n      const res = await axios.get(`trending/all/day?api_key=${API_KEY}`);\n      return res.data.results;\n    } else if (param === 'search') {\n      const res = await axios.get(\n        `search/movie?query=${query}&api_key=${API_KEY}`\n      );\n      return res.data.results;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport default fetchMovies;\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"Movies_form__4ow+Z\"};","import { useEffect, useState } from 'react';\nimport { Link, useSearchParams, useLocation } from 'react-router-dom';\nimport fetchMovies from 'api/fetchMovies';\nimport css from './Movies.module.css';\n\nconst Movies = () => {\n  const [filter, setFilter] = useState('');\n  const [movies, setMovies] = useState([]);\n  const [params, setParams] = useSearchParams();\n  const searchMovies = params.get('query') ?? '';\n  const location = useLocation();\n\n  useEffect(() => {\n    setFilter(searchMovies);\n    fetchMovies('search', filter).then(res => setMovies(res));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [filter]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setFilter(searchMovies);\n    e.target.value = '';\n  };\n\n  const updateQuery = e => {\n    const value = e.target.value;\n    if (value === '') {\n      return setParams({});\n    }\n    setParams({ query: value });\n  };\n\n  return (\n    <section>\n      <div className=\"container\">\n        <form className={css.form} onSubmit={handleSubmit}>\n          <input\n            type=\"text\"\n            name=\"query\"\n            onChange={updateQuery}\n            value={searchMovies}\n          />\n          <button type=\"submit\">Search</button>\n        </form>\n        <ul>\n          {movies &&\n            movies.map(item => (\n              <li key={item.id}>\n                <Link\n                  key={item.id}\n                  to={`/movies/${item.id}`}\n                  state={{ from: location }}\n                >\n                  {item.title}\n                </Link>\n              </li>\n            ))}\n        </ul>\n      </div>\n    </section>\n  );\n};\n\nexport default Movies;\n"],"names":["API_KEY","fetchMovies","param","query","axios","res","data","results","console","log","useState","filter","setFilter","movies","setMovies","useSearchParams","params","setParams","searchMovies","get","location","useLocation","useEffect","then","className","css","onSubmit","e","preventDefault","target","value","type","name","onChange","map","item","to","id","state","from","title"],"sourceRoot":""}